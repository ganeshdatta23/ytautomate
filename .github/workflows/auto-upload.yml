# name: Auto Generate YouTube Video

# on:
#   schedule:
#     - cron: '30 5 * * *'  # Daily at 11 AM IST (5:30 AM UTC)
#   workflow_dispatch:  # Manual trigger

# jobs:
#   generate:
#     runs-on: ubuntu-latest
    
#     steps:
#       - name: Checkout repository
#         uses: actions/checkout@v4
      
#       - name: Set up Python
#         uses: actions/setup-python@v5
#         with:
#           python-version: '3.10'
      
#       - name: Install FFmpeg
#         run: |
#           sudo apt-get update
#           sudo apt-get install -y ffmpeg
      
#       - name: Install Python dependencies
#         run: |
#           python -m pip install --upgrade pip
#           pip install -r requirements.txt
      
#       - name: Create .env file
#         run: |
#           echo "YOUTUBE_CLIENT_ID=${{ secrets.YOUTUBE_CLIENT_ID }}" >> .env
#           echo "YOUTUBE_CLIENT_SECRET=${{ secrets.YOUTUBE_CLIENT_SECRET }}" >> .env
#           echo "PEXELS_API_KEY=${{ secrets.PEXELS_API_KEY }}" >> .env
#           echo "HUGGINGFACE_API_KEY=${{ secrets.HUGGINGFACE_API_KEY }}" >> .env
#           echo "GEMINI_API_KEY=${{ secrets.GEMINI_API_KEY }}" >> .env
#           echo "CHANNEL_NAME=${{ secrets.CHANNEL_NAME }}" >> .env
      
#       - name: Create client_secret.json
#         run: |
#           echo '${{ secrets.YOUTUBE_CLIENT_SECRET_JSON }}' > client_secret.json
      
#       - name: Setup YouTube authentication
#         run: |
#           echo "YOUTUBE_REFRESH_TOKEN=${{ secrets.YOUTUBE_REFRESH_TOKEN }}" >> .env
      
#       - name: Generate and upload video
#         run: |
#           python main.py --mode single
      

      
#       - name: Upload artifacts
#         if: failure()
#         uses: actions/upload-artifact@v4
#         with:
#           name: logs
#           path: |
#             automation.log
#             logs/

# # Setup Instructions:
# # 1. Add test user in Google Cloud Console:
# #    https://console.cloud.google.com/apis/credentials/consent?project=youtube-automation-475701
# #    Add: padamataganeshdatta@gmail.com as test user
# #
# # 2. Authenticate locally:
# #    python authenticate_github.py
# #    This creates token.pickle
# #
# # 3. Extract refresh token:
# #    python extract_refresh_token.py
# #    Copy the refresh token output
# #
# # 4. Add GitHub Secrets:
# #    - YOUTUBE_CLIENT_ID
# #    - YOUTUBE_CLIENT_SECRET
# #    - YOUTUBE_CLIENT_SECRET_JSON
# #    - YOUTUBE_REFRESH_TOKEN (from step 3)
# #    - PEXELS_API_KEY
# #    - GEMINI_API_KEY
# #    - HUGGINGFACE_API_KEY
# #    - CHANNEL_NAME
# #
# # See YOUTUBE_AUTH_SETUP.md for detailed instructions
